<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lightweight Well-Known Geometry Parsing • wk</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Lightweight Well-Known Geometry Parsing">
<meta property="og:description" content="Provides a minimal R and C++ API for parsing well-known binary and well-known text representation of geometries to and from R-native formats. Well-known binary is compact and fast to parse; well-known text is human-readable and is useful for writing tests. These formats are useful in R only if the information they contain can be accessed in R, for which high-performance functions are provided here.">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">wk</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.9.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/programming.html">Programming with the wk C and C++ API</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/paleolimbot/wk/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="wk">wk<a class="anchor" aria-label="anchor" href="#wk"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of wk is to provide lightweight R, C, and C++ infrastructure for a distributed ecosystem of packages that operate on collections of coordinates. First, wk provides vector classes for points, circles, rectangles, well-known text (WKT), and well-known binary (WKB). Second, wk provides a C API and set of S3 generics for event-based iteration over vectors of geometries.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the released version of wk from <a href="https://cran.r-project.org/" class="external-link">CRAN</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"wk"</span><span class="op">)</span></span></code></pre></div>
<p>You can install the development version from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"paleolimbot/wk"</span><span class="op">)</span></span></code></pre></div>
<p>If you can load the package, you’re good to go!</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://paleolimbot.github.io/wk/">wk</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="vector-classes">Vector classes<a class="anchor" aria-label="anchor" href="#vector-classes"></a>
</h2>
<p>Use <code><a href="reference/wkt.html">wkt()</a></code> to mark a character vector as containing well-known text, or <code><a href="reference/wkb.html">wkb()</a></code> to mark a vector as well-known binary. Use <code><a href="reference/xy.html">xy()</a></code>, <code><a href="reference/xy.html">xyz()</a></code>, <code><a href="reference/xy.html">xym()</a></code>, and <code><a href="reference/xy.html">xyzm()</a></code> to create vectors of points, and <code><a href="reference/rct.html">rct()</a></code> to create vectors of rectangles. These classes have full <a href="https://vctrs.r-lib.org" class="external-link">vctrs</a> support and <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>/<code><a href="https://rdrr.io/r/base/format.html" class="external-link">format()</a></code> methods to make them as frictionless as possible working in R and RStudio.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/wkt.html">wkt</a></span><span class="op">(</span><span class="st">"POINT (30 10)"</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;wk_wkt[1]&gt;</span></span>
<span><span class="co">#&gt; [1] POINT (30 10)</span></span>
<span><span class="fu"><a href="reference/wkb.html">as_wkb</a></span><span class="op">(</span><span class="fu"><a href="reference/wkt.html">wkt</a></span><span class="op">(</span><span class="st">"POINT (30 10)"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;wk_wkb[1]&gt;</span></span>
<span><span class="co">#&gt; [1] &lt;POINT (30 10)&gt;</span></span>
<span><span class="fu"><a href="reference/xy.html">xy</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;wk_xy[1]&gt;</span></span>
<span><span class="co">#&gt; [1] (1 2)</span></span>
<span><span class="fu"><a href="reference/rct.html">rct</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;wk_rct[1]&gt;</span></span>
<span><span class="co">#&gt; [1] [1 2 3 4]</span></span>
<span><span class="fu"><a href="reference/crc.html">crc</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;wk_crc[1]&gt;</span></span>
<span><span class="co">#&gt; [1] [0 0, r = 1]</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="generics">Generics<a class="anchor" aria-label="anchor" href="#generics"></a>
</h2>
<p>The wk package is made up of readers, handlers, and filters. Readers parse the various formats supported by the wk package, handlers calculate values based on information from the readers (e.g., translating a vector of geometries into another format), and filters transform information from the readers (e.g., transforming coordinates) on the fly. The <code><a href="reference/wk_handle.html">wk_handle()</a></code> and <code><a href="reference/wk_translate.html">wk_translate()</a></code> generics power operations for many geometry vector formats without having to explicitly support each one.</p>
</div>
<div class="section level2">
<h2 id="c-api">C API<a class="anchor" aria-label="anchor" href="#c-api"></a>
</h2>
<p>The distributed nature of the wk framework is powered by a <a href="https://github.com/paleolimbot/wk/blob/master/inst/include/wk-v1.h" class="external-link">~100-line header</a> describing the types of information that parsers typically encounter when reading geometries and the order in which that information is typically organized. Detailed information is available in the <a href="https://paleolimbot.github.io/wk/articles/articles/programming.html">C and C++ API article</a>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/wk_debug.html">wk_debug</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="reference/wkt.html">as_wkt</a></span><span class="op">(</span><span class="st">"LINESTRING (1 1, 2 2, 3 3)"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="reference/wk_format.html">wkt_format_handler</a></span><span class="op">(</span>max_coords <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; initialize (dirty = 0  -&gt; 1)</span></span>
<span><span class="co">#&gt; vector_start: &lt;Unknown type / 0&gt;[1] &lt;0x16d75aac0&gt; =&gt; WK_CONTINUE</span></span>
<span><span class="co">#&gt;   feature_start (1): &lt;0x16d75aac0&gt;  =&gt; WK_CONTINUE</span></span>
<span><span class="co">#&gt;     geometry_start (&lt;none&gt;): LINESTRING[UNKNOWN] &lt;0x16d75a950&gt; =&gt; WK_CONTINUE</span></span>
<span><span class="co">#&gt;       coord (1): &lt;0x16d75a950&gt; (1.000000 1.000000)  =&gt; WK_CONTINUE</span></span>
<span><span class="co">#&gt;       coord (2): &lt;0x16d75a950&gt; (2.000000 2.000000)  =&gt; WK_ABORT_FEATURE</span></span>
<span><span class="co">#&gt; vector_end: &lt;0x16d75aac0&gt;</span></span>
<span><span class="co">#&gt; deinitialize</span></span>
<span><span class="co">#&gt; [1] "LINESTRING (1 1, 2 2..."</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="sf-support">sf support<a class="anchor" aria-label="anchor" href="#sf-support"></a>
</h2>
<p>The wk package implements a reader and writer for sfc objects so you can use them wherever you’d use an <code><a href="reference/xy.html">xy()</a></code>, <code><a href="reference/rct.html">rct()</a></code>, <code><a href="reference/crc.html">crc()</a></code>, <code><a href="reference/wkb.html">wkb()</a></code>, or <code><a href="reference/wkt.html">wkt()</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/wk_debug.html">wk_debug</a></span><span class="op">(</span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_linestring</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="reference/wk_format.html">wkt_format_handler</a></span><span class="op">(</span>max_coords <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; initialize (dirty = 0  -&gt; 1)</span></span>
<span><span class="co">#&gt; vector_start: LINESTRING B[1] &lt;0x16d75dac8&gt; =&gt; WK_CONTINUE</span></span>
<span><span class="co">#&gt;   feature_start (1): &lt;0x16d75dac8&gt;  =&gt; WK_CONTINUE</span></span>
<span><span class="co">#&gt;     geometry_start (&lt;none&gt;): LINESTRING[3] &lt;0x16d75da10&gt; =&gt; WK_CONTINUE</span></span>
<span><span class="co">#&gt;       coord (1): &lt;0x16d75da10&gt; (1.000000 1.000000)  =&gt; WK_CONTINUE</span></span>
<span><span class="co">#&gt;       coord (2): &lt;0x16d75da10&gt; (2.000000 2.000000)  =&gt; WK_ABORT_FEATURE</span></span>
<span><span class="co">#&gt; vector_end: &lt;0x16d75dac8&gt;</span></span>
<span><span class="co">#&gt; deinitialize</span></span>
<span><span class="co">#&gt; [1] "LINESTRING (1 1, 2 2..."</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="lightweight">Lightweight<a class="anchor" aria-label="anchor" href="#lightweight"></a>
</h2>
<p>The wk package has zero dependencies and compiles in ~10 seconds.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=wk" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/paleolimbot/wk/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/paleolimbot/wk/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing wk</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Dewey Dunnington <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-9415-4582" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Edzer Pebesma <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-8049-7069" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/paleolimbot/wk/actions" class="external-link"><img src="https://github.com/paleolimbot/wk/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://app.codecov.io/gh/paleolimbot/wk?branch=master" class="external-link"><img src="https://codecov.io/gh/paleolimbot/wk/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Dewey Dunnington, Edzer Pebesma.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
